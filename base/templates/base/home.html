{% extends 'layout.html' %}
{% load humanize %}

{% block content %}

<div class="main-container">
    
    <div class="left-sidebar">
        <div class="new-post-container">
            <a class="new-post" href="{% url 'new-board' %}">+ Create Post</a>
        </div>

        <div class="category-container">
            <h2>Categories</h2>
            <a href="{% url 'home' %}">Any</a>
            {% for category in categories %}
                <div>
                    <a href="{% url 'home' %}?q={{category.name}}">{{category.name}}</a>
                </div>
            {% endfor %}
        </div>

        <div class="category-container">
            <h2>Cities</h2>
            {% for board in cities %}
                <div>
                    <a href="{% url 'home' %}?q={{board.city}}">{{board.city.title}}</a>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="content-container">
        <div>
          {% if board_count > 0 %}  
          <span><strong>Posts Available:</strong> {{board_count}}</span>
          {% else %}
          <span><strong>No Posts Found</span>
          {% endif %}  
          <hr>
        </div>
        {% for board in board_list %}
            <div>
                <h5>{{board.category}}</h5>
                <h4><a href="{% url 'board' board.id %}">{{board.name}}</a></h4>
                <span><small>Posted by @ {{board.author.username.title}} from {{board.city.title}}, {{board.state.upper}}</small></span>

                {% if request.user == board.author %}
                <a href="{% url 'edit-board' board.id %}">Edit | </a>
                <a href="{% url 'delete-board' board.id %}">Delete</a>
                {% endif %}

                <hr>
            </div>
        {% endfor %}
    </div>

    <div class="right-sidebar">
        <div class="recent-container">
            <h3>Activity</h3>
            <hr>
            {% for comment in activity_comments %}
            <div>
                <small>Posted by @{{comment.user}} - {{comment.created|timesince}} ago</small>
                <p>{{comment}}</p>
                <p>Comment From: <h4><a href="{% url 'board' comment.board.id %}">{{comment.board.name}}</a></h4> </p>
            </div>
            {% endfor %}
        </div>
    </div>

</div>

{% endblock content %}